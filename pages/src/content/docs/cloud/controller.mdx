---
title: Controller 开发
description: 一款企业级 Web 服务开发框架
sidebar:
    order: 4
---
import CheckAuthorize from '../../../components/CheckAuthorize.astro'
import {TabItem, Tabs, Aside} from "@astrojs/starlight/components";

<CheckAuthorize/>

Feat Cloud 在设计 Controller 注解时，一定程度上延用了 Spring 的设计理念，使得用户更容易理解和运用。

当然，我们也并非完全复刻Spring 的 Controller 注解，而是进行了极致的简化，剔除了不必要的灵活性。

**相关注解：**
- tech.smartboot.feat.cloud.annotation.Controller
- tech.smartboot.feat.cloud.annotation.RequestMapping
- tech.smartboot.feat.cloud.annotation.Param
- tech.smartboot.feat.cloud.annotation.PathParam
- tech.smartboot.feat.cloud.annotation.InterceptorMapping

## 基本使用

创建一个简单的 Controller 示例：

```java
@Controller("userApi")
public class UserController {
    
    // 支持路径参数
    @RequestMapping("/users/:id")
    public String getUser(@PathParam("id") String id) {
        return "User: " + id;
    }
    
    // 支持查询参数
    @RequestMapping("/users/search")
    public String searchUsers(@Param("name") String name, @Param("age") int age) {
        return "Search users with name: " + name + ", age: " + age;
    }
    
    // 支持对象参数绑定
    @RequestMapping("/users/create")
    public RestResult<Map<String, String>> createUser(UserParam param) {
        RestResult<Map<String, String>> result = new RestResult<>();
        result.setData(Collections.singletonMap("id", "123"));
        return result;
    }
}
```

## 拦截器使用

通过 `@InterceptorMapping` 注解可以为 Controller 添加拦截器：

```java
// 为用户API添加拦截器
@InterceptorMapping({"/users/*"})
public Interceptor userApiInterceptor() {
    return (context, completableFuture, chain) -> {
        System.out.println("Intercepting user API request...");
        chain.proceed(context, completableFuture);
    };
}
```

## 性能优势

与 Spring Boot 相比，Feat Cloud 的注解处理方式有本质区别：

| 特性 | Feat Cloud | Spring Boot |
|------|------------|-------------|
| 注解处理时机 | 编译期 | 运行时 |
| 反射使用 | 不需要 | 需要 |
| 性能 | 更高 | 相对较低 |
| 灵活性 | 简洁高效 | 更加灵活 |

这种设计使得 Feat Cloud 在保持类似 Spring Boot 开发体验的同时，实现了更好的性能表现。

### 注解处理机制
Feat Cloud 的注解处理在编译期完成，具有以下特点：

| 注解类型          | 处理时机       | 反射使用 | 性能优势         | 灵活性           |
|-------------------|----------------|----------|------------------|------------------|
| `@Controller`     | 编译期         | 无       | 高               | 简洁高效         |
| `@RequestMapping` | 编译期         | 无       | 高               | 简洁高效         |
| `@Param`          | 编译期         | 无       | 高               | 简洁高效         |
| `@PathParam`      | 编译期         | 无       | 高               | 简洁高效         |
| `@InterceptorMapping` | 编译期      | 无       | 高               | 简洁高效         |

**与Spring Boot对比**：
- **处理时机**：Feat Cloud在编译期处理注解，而Spring Boot在运行时通过反射处理
- **性能表现**：Feat Cloud避免了反射开销，启动更快、运行时性能更高
- **灵活性权衡**：Feat Cloud牺牲部分运行时动态性换取性能提升
