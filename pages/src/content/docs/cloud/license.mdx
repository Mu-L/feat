---
title: License生成器
description: Feat框架License生成工具
sidebar:
    order: 2
---

import LicenseGenerator from '../../../components/LicenseGenerator.astro';

# Feat License 生成器

Feat 框架提供了基于 ECDSA P-256 椭圆曲线数字签名的商业许可证生成工具。本工具实现了与 Java 版本完全一致的加密算法，确保生成的许可证能够被 Feat 框架正确验证。

## 🔐 许可证生成原理

### 加密算法详情

- **椭圆曲线**: P-256 (secp256r1)
- **签名算法**: ECDSA with SHA-256
- **密钥格式**: DER 编码，Base64 表示
- **签名格式**: ASN.1 DER 编码，Base64 表示

### 生成流程

1. **密钥对生成**: 使用 P-256 椭圆曲线生成公钥/私钥对
2. **数据签名**: 对授权对象名称使用私钥进行 ECDSA 签名
3. **许可证编号**: 按 `yyyyMMdd000001` 格式生成唯一编号
4. **配置输出**: 生成 `feat_users.yaml` 和 `feat.yml` 配置

### 安全特性

- ✅ **椭圆曲线加密**: 提供与 RSA-3072 相当的安全强度
- ✅ **数字签名**: 确保许可证不可伪造和篡改
- ✅ **Base64 编码**: 便于配置文件存储和传输
- ✅ **标准兼容**: 与 Java 标准加密库完全兼容

## 🛠️ 在线生成工具

<LicenseGenerator />

### 许可证编号管理

**支持的编号格式：**

#### 1. 🏢 统一社会信用代码（推荐）
- **格式**: 18位代码（前17位数字 + 最后1位数字或X）
- **示例**: `91110000123456789X`、`12345678901234567890`
- **优势**: 正式、唯一、权威性高，适合企业用户

#### 2. 📚 开源项目仓库地址（推荐）
- **格式**: `域名/用户名/项目名`
- **示例**: 
  - `github.com/smartboot/feat`
  - `gitlab.com/myorg/myproject`
  - `gitee.com/smartboot/feat`
- **优势**: 直观、易识别、便于开源项目管理

#### 3. 📅 时间编号
- **格式**: 14位数字（YYYYMMDD + 6位序列号）
- **示例**: `20241201000001`、`20241201000002`
- **优势**: 按时间排序、便于批量管理

#### 4. 🏦 自定义编号
- **格式**: 6-50位字符（支持字母、数字、部分特殊字符）
- **示例**: `COMPANY-DEPT-001`、`PROJECT-2024-ALPHA`
- **优势**: 灵活性高，支持企业内部编号规则

**编号选择建议：**

| 使用场景 | 推荐格式 | 原因 |
|----------|----------|---------|
| 🏢 企业商业授权 | 统一社会信用代码 | 正式、权威、易于审计 |
| 📚 开源项目授权 | 仓库地址 | 直观、与项目关联度高 |
| 📅 批量管理 | 时间编号 | 按时间排序、便于统计 |
| 🏦 内部系统 | 自定义编号 | 符合企业规范 |

**操作指南：**
- 📝 **手动输入**: 直接在输入框中输入任意支持的格式
- ⏰ **时间编号**: 点击“时间编号”按钮快速生成当前日期编号
- ✅ **格式验证**: 系统自动验证编号格式，确保符合要求

## 📝 使用说明

### 步骤 1: 输入授权信息
- **授权对象名称**: 输入被授权的组织或个人名称
- **许可证编号**: 支持多种格式，可手动输入或点击“时间编号”按钮
  - **统一社会信用代码**: 18位代码，如 `91110000123456789X`
  - **仓库地址**: Git仓库地址，如 `github.com/smartboot/feat`
  - **时间编号**: 14位数字，如 `20241201000001`
  - **自定义编号**: 6-50位字符，支持企业内部编号规则

### 步骤 2: 生成许可证
点击 "生成许可证" 按钮，系统将：
1. 生成 ECDSA 密钥对
2. 对授权名称进行数字签名
3. 输出配置文件内容

### 步骤 3: 配置部署

#### feat_users.yaml 配置

将生成的配置添加到 `feat_users.yaml` 文件中：

```yaml
# 企业统一社会信用代码示例
users:
  91110000123456789X:
    num: 91110000123456789X
    name: 某某科技有限公司
    license: your_license_signature

# 开源项目仓库地址示例
  github.com/smartboot/feat:
    num: github.com/smartboot/feat
    name: Feat框架开源项目
    license: your_license_signature

# 时间编号示例
  20241201000001:
    num: 20241201000001
    name: 测试用户
    license: your_license_signature
```

#### feat.yml 配置

在应用的 `feat.yml` 配置文件中添加：

```yaml
# 使用企业信用代码
license: 91110000123456789X_your_public_key

# 或使用仓库地址
license: github.com/smartboot/feat_your_public_key

# 或使用时间编号
license: 20241201000001_your_public_key
```

### 步骤 4: 验证许可证
使用 "验证许可证" 功能确保生成的许可证有效。

### ⚠️ 重要提醒

### 🔑 许可证编号选择策略

**推荐优先级顺序：**
1. **🥇 统一社会信用代码** - 适合企业商业授权，具有法律效力
2. **🥈 仓库地址** - 适合开源项目，直观易识别
3. **🥉 时间编号** - 适合批量管理或测试环境
4. **🏷️ 自定义编号** - 适合特殊需求或内部系统

**不同场景的编号建议：**

| 授权场景 | 推荐编号类型 | 理由 | 示例 |
|---------|------------|------|------|
| 🏢 企业付费授权 | 统一社会信用代码 | 正式、权威、便于审计 | `91110000123456789X` |
| 🌟 开源项目授权 | 仓库地址 | 直观、与项目关联性强 | `github.com/smartboot/feat` |
| 🔬 测试环境 | 时间编号 | 临时性、便于区分 | `20241201000001` |
| 🏭 内部系统 | 自定义编号 | 符合企业规范 | `DEPT-PROJECT-001` |
| 📊 批量授权 | 时间编号 | 便于统计管理 | `20241201000001-100` |

**编号管理最佳实践：**
- 📝 **建立台账** - 维护许可证编号分配记录
- 🔒 **确保唯一性** - 每个编号在系统中只使用一次
- 📂 **分类管理** - 按照编号类型进行分类存储
- 🔄 **定期审查** - 定期检查许可证使用情况
- 📋 **文档记录** - 记录每个许可证的授权范围和期限

### 密钥安全
- **私钥保管**: 私钥用于生成许可证签名，请妥善保管，不要泄露
- **公钥分发**: 公钥用于验证许可证，可以安全地嵌入到应用程序中
- **签名唯一性**: 每次生成的签名都是唯一的，确保许可证的不可复制性

### 许可证管理
- **编号唯一性**: 确保每个许可证编号在系统中是唯一的
- **授权范围**: 明确许可证的授权范围和使用限制
- **有效期管理**: 根据业务需要设置许可证的有效期

## 🔍 技术实现

本工具使用以下技术栈实现：

- **前端框架**: Astro + JavaScript
- **加密库**: elliptic.js (椭圆曲线加密)
- **哈希算法**: Web Crypto API (SHA-256)
- **编码格式**: Base64 编码

### 与 Java 版本的兼容性

| 特性 | Java 实现 | JavaScript 实现 |
|------|-----------|------------------|
| 椭圆曲线 | P-256 | P-256 (secp256r1) |
| 签名算法 | SHA256withECDSA | ECDSA + SHA-256 |
| 密钥格式 | X509EncodedKeySpec | DER 编码 |
| 签名格式 | DER ASN.1 | DER ASN.1 |
| 编码方式 | Base64 | Base64 |

确保生成的许可证能够被 Java 版本的 Feat 框架正确验证和使用。
